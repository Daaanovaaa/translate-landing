<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Translation Helper</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 2rem; }
    button { padding: 1rem 2rem; margin: 1rem; font-size: 1rem; cursor: pointer; }
    .lang-btn { margin: 0.3rem; }
  </style>
</head>
<body>
  <h1>🌍 Translate Your Email</h1>
  <p>Open this page from your "View in Browser" link for best results. Then choose a language and click the button below:</p>

  <!-- Language buttons -->
  <div id="languages">
    <button class="lang-btn" data-lang="es">🇪🇸 Español</button>
    <button class="lang-btn" data-lang="fr">🇫🇷 Français</button>
    <button class="lang-btn" data-lang="pt">🇵🇹 Português</button>
    <button class="lang-btn" data-lang="de">🇩🇪 Deutsch</button>
    <button class="lang-btn" data-lang="zh-CN">🇨🇳 中文</button>
    <button class="lang-btn" data-lang="ar">🇸🇦 العربية</button>
    <button class="lang-btn" data-lang="hi">🇮🇳 हिन्दी</button>
    <button class="lang-btn" data-lang="ja">🇯🇵 日本語</button>
    <button class="lang-btn" data-lang="ru">🇷🇺 Русский</button>
  </div>

  <br>
  <button id="translateBtn">Translate This Email</button>

  <script>
    // Default language (can change via button click)
    let selectedLang = 'auto';

    // Detect referrer (View-in-Browser URL)
    let emailUrl = document.referrer || window.location.href;

    // Language button click handling
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        selectedLang = btn.getAttribute('data-lang');
        alert(`Language set to ${btn.textContent}. Now click "Translate This Email".`);
      });
    });

    // Translate button click
    document.getElementById('translateBtn').addEventListener('click', () => {
      // Optional: copy email URL to clipboard
      navigator.clipboard.writeText(emailUrl).then(() => {
        console.log('Email URL copied to clipboard');
      }).catch(() => {
        console.log('Could not copy URL automatically');
      });

      // Open Google Translate in a new tab
      const translateUrl = `https://translate.google.com/translate?sl=auto&tl=${selectedLang}&u=${encodeURIComponent(emailUrl)}`;
      window.open(translateUrl, '_blank');
    });
  </script>
</body>
</html>
