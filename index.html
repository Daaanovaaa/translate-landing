<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Translation Helper</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 2rem; }
    button { padding: 1rem 2rem; margin: 1rem; font-size: 1rem; cursor: pointer; }
  </style>
</head>
<body>
  <h1>üåç Translate Your Email</h1>
  <p>Open this page from your "View in Browser" link for best results. Then click the button below:</p>

  <button id="translateBtn">Translate This Email</button>

  <script>
    // Detect referrer (View-in-Browser URL)
    let emailUrl = document.referrer || window.location.href;

    // Read language from ?lang= query parameter
    const urlParams = new URLSearchParams(window.location.search);
    let selectedLang = urlParams.get('lang') || 'auto';

    // Translate button click
    document.getElementById('translateBtn').addEventListener('click', () => {
      // Optional: copy email URL to clipboard
      navigator.clipboard.writeText(emailUrl).catch(() => {});

      // Open Google Translate in a new tab
      const translateUrl = `https://translate.google.com/translate?sl=auto&tl=${selectedLang}&u=${encodeURIComponent(emailUrl)}`;
      window.open(translateUrl, '_blank');
    });
  </script>
</body>
</html>
